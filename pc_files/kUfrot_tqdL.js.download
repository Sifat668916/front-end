;/*FB_PKG_DELIM*/

__d("LSComputeOptimisticThreadCapabilities",["LSArrayGetObjectAt","LSComputeParticipantCapabilities","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[0]=c.createArray(),c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return c.fe(c.db.table(14).fetch([[[a[0],{lt:d[1]}],[a[0],{gt:d[1]}]]]),function(e){var f=e.item;return c.seq([function(e){return c.sp(b("LSComputeParticipantCapabilities"),f.contactId,a[0]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[25]=(d[0].push(d[24]),d[0])}])})},function(a){return d[2]=c.i64.cast([0,1073741823]),d[3]=c.i64.of_int32(d[0].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(a){return d[24]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[0],d[24]).then(function(a){return a=a,d[25]=a[0],d[26]=a[1],a})},function(a){return d[2]=c.i64.and_(d[2],d[25])}])}):c.resolve()},function(b){return d[4]=c.i64.of_int32(d[0].length),c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,e){var a=b.done;b=b.value;return a?d[24]=!1:(e=b.item,d[24]=c.i64.eq(e.contactTypeExact,c.i64.cast([0,16]))?!0:!1)})},function(a){return d[5]=d[24]}]):(e=b.item,d[5]=c.i64.eq(e.threadType,c.i64.cast([0,201]))?!0:!1)})},function(b){return d[7]=c.i64.cast([64,1083495711]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,0]),d[10]=c.i64.cast([0,0]),d[11]=c.i64.cast([0,8650752]),d[12]=c.i64.cast([0,0]),d[13]=c.i64.cast([0,0]),d[14]=c.i64.cast([0,0]),d[23]=d[5]?d[11]:d[7],c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[d[23],c.i64.cast([0,1])],d[15]=e[0],d[16]=e[1],e):(b=a.item,e=[d[23],b.threadType],d[15]=e[0],d[16]=e[1],e)})},function(a){return d[18]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,10]))),d[19]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,23]))),d[20]=c.createArray(),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,6]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,6]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,0]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,7]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,1]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,72]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,72]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,12]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,8]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,8]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,2]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,9]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,9]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,3]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,10]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,10]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,4]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,5]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,5]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,8]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,11]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,11]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,14]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,12]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,12]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,15]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,13]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,13]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,18]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,14]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,14]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,20]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,15]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,15]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,23]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,3]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,3]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,10]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(f,f)||c.i64.neq(c.i64.and_(c.i64.cast([0,0]),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,30]))):c.i64.cast([0,0])),d[20]),d[24]=(d[20].push(c.i64.eq(c.i64.cast([0,24]),f)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,24]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,38]))):c.i64.cast([0,0])),d[20]),d[21]=c.i64.cast([0,0]),d[22]=c.i64.of_int32(d[20].length),c.i64.gt(d[22],c.i64.cast([0,0]))?c.loopAsync(d[22],function(a){return d[24]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[20],d[24]).then(function(a){return a=a,d[25]=a[0],d[26]=a[1],a})},function(a){return d[21]=c.i64.add(d[21],d[25])}])}):c.resolve()},function(a){return e[0]=c.i64.and_(d[21],c.i64.and_(c.i64.and_((c.i64.eq(d[16],c.i64.cast([0,1]))?c.i64.eq(d[4],c.i64.cast([0,0])):!0)?c.i64.eq(c.i64.and_(d[15],d[18]),c.i64.cast([0,0]))?d[15]:c.i64.sub(d[15],d[18]):d[15],c.i64.eq(d[16],c.i64.cast([0,2]))?c.i64.eq(c.i64.and_(d[15],d[19]),c.i64.cast([0,0]))?d[15]:c.i64.sub(d[15],d[19]):d[15]),(c.i64.eq(d[16],c.i64.cast([0,1]))?c.i64.neq(d[4],c.i64.cast([0,0])):!1)?d[15]:c.i64.xor(d[15],c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,12]))))))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(f){return c.seq([function(a){return d[0]=c.i64.of_float(Date.now()),c.sp(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[2]=c.i64.cast([64,1083495711]),d[3]=c.i64.cast([0,0]),d[4]=c.i64.cast([0,0]),d[5]=c.i64.cast([0,0]),c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[6]=a[0],a})},function(a){return c.fe(c.ftr(c.db.table(9).fetch([[[d[1]]]]),function(a){return c.i64.eq(a.threadKey,d[1])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[1],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,2]),clientThreadKey:d[1],folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[6],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[2],capabilities2:d[3],capabilities3:d[4],capabilities4:d[5],nullstateDescriptionText1:a[1],threadName:a[2]})},function(e){return d[7]=c.i64.of_int32(a[0].length),c.i64.gt(d[7],c.i64.cast([0,0]))?c.loopAsync(d[7],function(e){return d[8]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[0],d[8]).then(function(a){return a=a,d[9]=a[0],d[10]=a[1],a})},function(a){return c.fe(c.ftr(c.db.table(14).fetch([[[d[1],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[9])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[1],contactId:d[9],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalCreateOptimisticGroupThread",["LSArrayGetObjectAt","LSGetViewerFBID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticGroupThread"),a[0],a[1],f).then(function(a){return a=a,d[0]=a[0],a})},function(e){return a[2]===!0?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,5]))?f!==f?c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=c.i64.cast([0,0]),d[3]=c.i64.of_int32(a[0].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(e){return d[4]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[0],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(a){return c.i64.neq(d[5],d[1])?d[7]=d[5]:d[7]=d[2],d[2]=d[7]}])}):c.resolve()},function(a){return f!==f?(d[4]=new c.Map(),d[4].set("seller_id",d[2]),d[4].set("thread_metadata",f),d[4].set("client_thread_key",d[0]),d[5]=d[4].get("client_thread_key"),d[4],d[6]=c.toJSON(d[4]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[5]),c.i64.cast([0,646]),d[6],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))):c.resolve()}]):c.resolve(function(a){c.logger(a).mustfix(a)}("Marketplace thread metadata cannot be null")):(d[1]=new c.Map(),d[1].set("participants",a[0]),d[1].set("client_thread_key",d[0]),d[1].set("sync_group",c.i64.cast([0,1])),d[2]=d[1].get("client_thread_key"),d[1],d[3]=c.toJSON(d[1]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[2]),c.i64.cast([0,153]),d[3],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))):c.resolve()},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticUpdateHasPendingJoinRequest",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.fe(b.ftr(b.db.table(9).fetch(),function(c){return c.needsAdminApprovalForNewParticipant===!0&&b.i64.eq(c.threadKey,a[0])}),function(d){var f=d.item;return b.seq([function(d){return a[1]?b.seq([function(a){return b.localizeV2Async(b.i64.cast([0,3199643703]),e).then(function(a){return c[2]=a})},function(a){return c[0]=c[2]}]):b.seq([function(a){return b.localizeV2Async(b.i64.cast([0,1531706844]),e).then(function(a){return c[2]=a})},function(a){return c[0]=c[2]}])},function(a){return c[1]=f.lastReadWatermarkTimestampMs,b.fe(b.db.table(9).fetch([[[f.threadKey]]]),function(a){var b=a.update;a.item;return b({snippet:c[0],lastReadWatermarkTimestampMs:c[1]})})}])})},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSUpdateCommunityChannelJoiningTaskID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(162).fetch([[[a[0]]],"byFbGroupId"],[[[a[0]]]]),function(c){return b.i64.eq(c.fbGroupId,a[0])||b.i64.eq(c.communityType,b.i64.cast([0,1]))&&b.i64.eq(c.folderId,a[0])}),function(b){var c=b.update;b.item;return c({joiningChannelTaskId:a[1]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSUpdateCommunityChannelDirectInvite",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSOptimisticUpdateHasPendingJoinRequest","LSUpdateCommunityChannelJoiningTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(d){return c.i64.eq(a[1],c.i64.cast([0,1]))&&!1!==f&&!1?c.sp(b("LSOptimisticUpdateHasPendingJoinRequest"),a[0],!0):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[11]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[12]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[11],d[12],f,f)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("channel_id",a[0]),d[2].set("state",a[1]),d[2].set("is_request_to_join",!1!==f&&!1),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[11]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[11],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("channel_id"),d[2],d[5]=c.toJSON(d[2]),c.sp(b("LSIssueNewTaskAndGetTaskID"),["community_channel_invitation","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,463]),d[5],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,d[3]).then(function(a){return a=a,d[6]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[7]=c.i64.cast([-1,4294967295]):(b=a.item,d[7]=b.parentThreadKey)})},function(a){return c.db.table(162).fetch([[[d[7]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([-1,4294967295]):(b=a.item,d[9]=b.fbGroupId)})},function(e){return c.i64.eq(a[1],c.i64.cast([0,1]))?c.sp(b("LSUpdateCommunityChannelJoiningTaskID"),d[9],d[6]):c.resolve()}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(e){return c.i64.eq(a[1],c.i64.cast([0,5]))?d[0]=c.i64.cast([-1,4294967284]):d[0]=c.i64.cast([0,0]),c.sp(b("LSVerifyThreadExistsV2"),a[0],a[1],"inbox",d[0],a[3],!1,a[2],!1,!1)},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSVerifyThreadView",["LSArrayGetObjectAt","LSComputeOptimisticThreadCapabilities","LSInsertNewMessageRange","LSIssueNewTask","LSLocalCreateOptimisticGroupThread","LSMessagePointQuery","LSVerifyContactRowExists","LSVerifyThreadRowExists","LSVerifyThreadRowExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.i64.eq(a[1],c.i64.cast([0,7]))?c.resolve((e=[a[0],c.i64.cast([0,1024])],d[0]=e[0],d[1]=e[1],e)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var g=b.done;b=b.value;return g?(c.i64.eq(a[0],c.i64.cast([0,0]))?d[10]=a[0]:d[10]=f,g=[d[10],f,c.i64.cast([0,20])],d[2]=g[0],d[3]=g[1],d[4]=g[2],g):(e=b.item,g=[e.threadKey,e.clientThreadKey,e.authorityLevel],d[2]=g[0],d[3]=g[1],d[4]=g[2],g)})},function(e){return d[10]=c.i64.of_int32(a[6].length),c.i64.eq(a[1],c.i64.cast([0,1]))&&c.i64.gt(d[10],c.i64.cast([0,0]))?(d[11]=c.i64.of_int32(a[6].length),c.i64.gt(d[11],c.i64.cast([0,0]))?c.loopAsync(d[11],function(e){return d[12]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[6],d[12]).then(function(a){return a=a,d[13]=a[0],d[14]=a[1],a})},function(a){return d[15]=d[13].get("contact_id"),d[13],d[16]=d[13].get("contact_type"),d[13],d[17]=d[13].get("contact_name"),d[13],d[18]=d[13].get("contact_profile_photo"),d[13],c.sp(b("LSVerifyContactRowExists"),d[15],c.i64.cast([0,0]),d[18],d[17],d[16],f,f,f,f,!1,!1,c.i64.cast([0,0]),f,!1,c.i64.cast([0,20]),f,f,c.i64.cast([0,0]),c.i64.cast([0,2]),c.i64.cast([0,0]),f)}])}):c.resolve()):c.resolve()},function(e){return a[5]!==f?c.seq([function(d){return c.sp(b("LSMessagePointQuery"),a[0],a[5],a[1])},function(b){return d[6]=a[0]}]):c.seq([function(e){return(c.i64.eq(a[1],c.i64.cast([0,2]))||c.i64.eq(a[1],c.i64.cast([0,5])))&&c.i64.eq(a[0],c.i64.cast([0,0]))?c.seq([function(e){return d[11]=c.createArray(),d[12]=c.i64.of_int32(a[6].length),c.i64.gt(d[12],c.i64.cast([0,0]))?c.loopAsync(d[12],function(e){return d[24]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[6],d[24]).then(function(a){return a=a,d[25]=a[0],d[26]=a[1],a})},function(a){return d[27]=d[25].get("contact_id"),d[25],d[28]=d[25].get("contact_type"),d[25],d[29]=d[25].get("contact_name"),d[25],d[30]=d[25].get("contact_profile_photo"),d[25],d[31]=(d[11].push(d[27]),d[11])}])}):c.resolve()},function(a){return d[13]=c.i64.of_int32(d[11].length),d[14]=c.createArray(),c.seq([function(a){return d[24]=c.createArray(),d[25]=c.i64.of_int32(d[11].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[27]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[11],d[27]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],a})},function(a){return d[30]=(d[24].push(c.i64.to_string(d[28])),d[24])}])}):c.resolve()},function(a){return d[26]=d[24].join(","),d[15]=d[26]}])},function(a){return c.gb(c.ftr(c.db.table(14).fetch(),function(a){return d[11].some(function(b){return c.i64.eq(a.contactId,b)})}),"threadKey").forEach(function(a){return c.i64.eq(a.group_count,d[13])?d[24]=(d[14].push(a.threadKey),d[14]):0})},function(a){return d[16]=c.createArray(),c.seq([function(a){return d[24]=c.createArray(),d[25]=c.i64.of_int32(d[14].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[27]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[14],d[27]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],a})},function(a){return d[30]=(d[24].push(c.i64.to_string(d[28])),d[24])}])}):c.resolve()},function(a){return d[26]=d[24].join(","),d[17]=d[26]}])},function(a){return c.gb(c.ftr(c.db.table(14).fetch(),function(a){return d[14].some(function(b){return c.i64.eq(a.threadKey,b)})}),"threadKey").forEach(function(a){return c.i64.eq(a.group_count,d[13])?d[24]=(d[16].push(a.threadKey),d[16]):0})},function(a){return c.seq([function(a){return d[24]=c.createArray(),d[25]=c.i64.of_int32(d[16].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[27]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[16],d[27]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],a})},function(a){return d[30]=(d[24].push(c.i64.to_string(d[28])),d[24])}])}):c.resolve()},function(a){return d[26]=d[24].join(","),d[18]=d[26]}])},function(b){return c.islc(c.ftr(c.db.table(9).fetchDesc([[[c.merge({lt:c.i64.cast([0,5])},a[1])],[c.merge({gt:c.i64.cast([0,5])},a[1])],[c.merge(c.i64.cast([0,5]),a[1])]],"threadTypeLastActivityTimestampMs"]),function(b){return d[16].some(function(a){return c.i64.eq(b.threadKey,a)})&&(c.i64.neq(b.threadType,c.i64.cast([0,5]))&&b.threadName===f||c.i64.eq(b.threadType,c.i64.cast([0,5]))&&b.threadName===a[2])&&c.i64.eq(b.threadType,a[1])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[f,f,c.i64.cast([0,20])],d[19]=e[0],d[20]=e[1],d[21]=e[2],e):(b=a.item,e=[b.threadKey,b.clientThreadKey,b.authorityLevel],d[19]=e[0],d[20]=e[1],d[21]=e[2],e)})},function(e){return c.i64.neq(d[19],f)?c.seq([function(e){return c.i64.eq(a[1],c.i64.cast([0,5]))?c.sp(b("LSVerifyThreadRowExistsV2"),d[19],a[1],c.i64.cast([0,1]),c.i64.cast([0,20])):c.sp(b("LSVerifyThreadRowExists"),d[19],a[1],c.i64.cast([0,1]))},function(a){return d[23]=d[19]}]):c.seq([function(e){return d[25]=c.i64.of_int32(a[6].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(e){return d[26]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[6],d[26]).then(function(a){return a=a,d[27]=a[0],d[28]=a[1],a})},function(a){return d[29]=d[27].get("contact_id"),d[27],d[30]=d[27].get("contact_type"),d[27],d[31]=d[27].get("contact_name"),d[27],d[32]=d[27].get("contact_profile_photo"),d[27],c.sp(b("LSVerifyContactRowExists"),d[29],c.i64.cast([0,0]),d[32],d[31],d[30],f,f,f,f,!1,!1,c.i64.cast([0,0]),f,!1,c.i64.cast([0,20]),f,f,c.i64.cast([0,0]),c.i64.cast([0,2]),c.i64.cast([0,0]),f)}])}):c.resolve()},function(a){return c.sp(b("LSLocalCreateOptimisticGroupThread"),d[11],"",!0).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.sp(b("LSInsertNewMessageRange"),d[24],c.i64.cast([0,0]),c.i64.cast([2328,1316134911]),"","",c.i64.cast([0,0]),c.i64.cast([0,0]),!1,!1,f)},function(a){return d[23]=d[24]}])},function(a){return d[10]=d[23]}]):c.seq([function(e){return c.i64.eq(a[1],c.i64.cast([0,153]))&&!0||c.i64.eq(a[1],c.i64.cast([0,155]))&&!0||c.i64.eq(a[1],c.i64.cast([0,19]))?c.seq([function(e){return d[12]=new c.Map(),d[12].set("thread_fbid",a[0]),d[12].set("force_upsert",!1),d[12].set("use_open_messenger_transport",!1),d[12].set("sync_group",c.i64.cast([0,1])),d[12].set("metadata_only",!1),d[12].set("preview_only",!0),d[13]=d[12].get("thread_fbid"),d[12],d[14]=c.toJSON(d[12]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[13]),c.i64.cast([0,209]),d[14],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))},function(b){return d[11]=a[0]}]):c.seq([function(d){return c.i64.eq(a[1],c.i64.cast([0,5]))?c.sp(b("LSVerifyThreadRowExistsV2"),a[0],a[1],c.i64.cast([0,1]),c.i64.cast([0,20])):c.sp(b("LSVerifyThreadRowExists"),a[0],a[1],c.i64.cast([0,1]))},function(e){return c.i64.lt(d[4],c.i64.cast([0,60]))?c.sp(b("LSInsertNewMessageRange"),a[0],c.i64.cast([0,0]),c.i64.cast([2328,1316134911]),"","",c.i64.cast([0,0]),c.i64.cast([0,0]),!1,!1,f):c.resolve()},function(b){return d[11]=a[0]}])},function(a){return d[10]=d[11]}])},function(a){return d[6]=d[10]}])},function(e){return c.i64.eq(d[4],c.i64.cast([0,20]))?c.seq([function(e){return c.i64.neq(a[4],f)?c.resolve(d[10]=a[4]):c.seq([function(a){return c.sp(b("LSComputeOptimisticThreadCapabilities"),d[6]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[10]=d[11]}])},function(a){return c.fe(c.db.table(9).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({capabilities:d[10]})})}]):c.resolve()},function(a){return c.db.table(9).fetch([[[d[6]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[d[6],c.i64.cast([0,0])],d[7]=e[0],d[8]=e[1],e):(b=a.item,b.isDisappearingMode?(e=[b.disappearingThreadKey,c.i64.cast([0,1024])],d[10]=e[0],d[11]=e[1],e):(a=[d[6],b.mailboxType],d[10]=a[0],d[11]=a[1],a),e=[d[10],d[11]],d[7]=e[0],d[8]=e[1],e)})},function(a){return a=[d[7],d[8]],d[0]=a[0],d[1]=a[1],a}])},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("MWXIconCheckmark",["MWXSvgIcon","SVGIcon","cr:7587","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:7587")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MWXIconCross",["MWXSvgIcon","SVGIcon","cr:7629","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:7629")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MWXIconDots3Horizontal",["MWXSvgIcon","SVGIcon","cr:7098","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:7098")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MessengerCamcorder.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 36 36",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M9 9.5a4 4 0 0 0-4 4v9a4 4 0 0 0 4 4h10a4 4 0 0 0 4-4v-9a4 4 0 0 0-4-4H9zM25.829 21.532l3.723 1.861A1 1 0 0 0 31 22.5V13.5a1 1 0 0 0-1.448-.894l-3.723 1.861A1.5 1.5 0 0 0 25 15.81v4.38a1.5 1.5 0 0 0 .829 1.342z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerPhone.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 36 36",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M25.753 28.2c1.07-.357 1.816-1.275 2.423-2.225a2.05 2.05 0 0 0 .037-2.151 4.998 4.998 0 0 0-.723-.963 11.594 11.594 0 0 0-2.888-2.112c-.58-.299-1.272-.212-1.808.159l-2.098 1.452a.472.472 0 0 1-.437.055 11.557 11.557 0 0 1-4.045-2.63 11.554 11.554 0 0 1-2.63-4.044.472.472 0 0 1 .056-.437l1.453-2.098c.37-.536.457-1.228.158-1.807A11.587 11.587 0 0 0 13.14 8.51a4.995 4.995 0 0 0-.963-.723 2.05 2.05 0 0 0-2.15.037c-.951.607-1.87 1.353-2.225 2.424-1.174 3.527 1.187 8.461 5.338 12.613 4.152 4.151 9.086 6.512 12.614 5.338z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWXListCellHoverActions.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={action:{marginStart:"x1i64zmx",$$css:!0},menuButtonContainer:{display:"x78zum5",end:"x84fkku",pointerEvents:"x67bb7w",position:"x10l6tqk",top:"xwa60dl",transform:"x1cb1t30",$$css:!0},visuallyHidden:{WebkitClipPath:"xqvhz8l",clip:"x1qvwoe0",clipPath:"xd0x92v",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"x1i1rx1s",$$css:!0}};function a(a){var b=a.children;a=a.hidden;return h.jsx("div",{className:c("stylex")(i.menuButtonContainer,a&&i.visuallyHidden),children:Array.isArray(b)?b.filter(function(a){return a!=null}).map(function(a,b){return h.jsx("div",{className:"x1i64zmx",children:a},b)}):b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXListCellHoverButton.react",["fbt","CometDeferredPopoverTrigger.react","CometEntryPointPopoverTrigger.react","CometLazyPopoverTrigger.react","FocusWithinHandler.react","MWXCircleButton.react","MWXIconDots3Horizontal","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback,k={buttonShadow:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x10xjkym",$$css:!0}};function a(a){var b=a.label,d=a.onFocusChange,e=a.onHoverChange,f=a.onMenuStateChange,g=a.onPress,l=a.size,m=a.testid,n=j(function(a){f!=null&&f(a)},[f]),o=j(function(a,f,j,m,n){return i.jsx("div",{ref:a,children:i.jsx(c("FocusWithinHandler.react"),{onFocusChange:d,children:function(a){return i.jsx("div",{className:c("stylex")(!a&&k.buttonShadow),children:i.jsx(c("MWXCircleButton.react"),{color:"secondary",icon:c("MWXIconDots3Horizontal"),label:b!=null?b:h._("__JHASH__LtCYmN0GXLi__JHASH__"),onHoverIn:function(a){j&&j(a),e&&e(!0)},onHoverOut:function(){m&&m(),e&&e(!1)},onPress:function(){g&&g(),f()},onPressIn:n,size:(a=l)!=null?a:36,testid:void 0,type:"overlay"})})}})})},[d,b,e,g,m,l]);m={align:"middle",fallback:a.popoverFallback,onVisibilityChange:n,popoverProps:a.popoverProps,position:"below"};if(a.popoverTriggerType==="lazy")return i.jsx(c("CometLazyPopoverTrigger.react"),babelHelpers["extends"]({},m,{popoverResource:a.popoverResource,children:function(a,b){return o(a,b)}}));else if(a.popoverTriggerType==="entryPoint"){n=m.popoverProps;var p=babelHelpers.objectWithoutPropertiesLoose(m,["popoverProps"]);return i.jsx(c("CometEntryPointPopoverTrigger.react"),babelHelpers["extends"]({},p,{entryPointParams:a.entryPointParams,otherProps:n,popoverEntryPoint:a.popoverEntryPoint,preloadTrigger:"button_aggressive",children:function(a,b,c,d,e,f){return o(a,b,d,e,f)}}))}else return i.jsx(c("CometDeferredPopoverTrigger.react"),babelHelpers["extends"]({},m,{popoverResource:a.popoverResource,children:function(a,b){return o(a,b)}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getValidMediaURL",["I64","ServerTime"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("I64").of_float(d("ServerTime").getMillis()/1e3)}function i(a){if(d("I64").gt(a,d("I64").zero))return d("I64").lt(a,h());else return!1}function a(a,b,c){return a!=null?i(a)?c:b:c}g["default"]=a}),98);
__d("useMWCMPausedChannelMemberDialog.react",["JSResourceForInteraction","emptyFunction","getValidMediaURL","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.threadImageUrl,d=a.threadImageUrlExpirationTimestampMs,e=a.threadImageUrlFallback,f=a.threadTitle;a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useMWCMPausedChannelMemberDialog.react"));var g=a[0];if(b==null||e==null||f==null)return[c("emptyFunction"),!1];var h=c("getValidMediaURL")(d,b,e);return[function(){g({threadImageUrl:h,threadTitle:f},c("emptyFunction"))},!0]}g["default"]=a}),98);
__d("useMWCMJoinCMThread",["CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSFactory","LSIntEnum","LSMailboxType","LSThreadBitOffset","LSVec","LSVerifyThreadView","MWCMThreadTypes.react","MWCMisStandAloneCommunity","Promise","ThreadStatus","cr:5781","emptyFunction","gkx","promiseDone","qex","react","useGroupsCometCMOffboardingEntryPointDialog","useMWNavigation","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useEffect,j=e.useState,k=function(a){return d("I64").equal(a,d("LSIntEnum").ofNumber(18))||d("I64").equal(a,d("LSIntEnum").ofNumber(21))};function a(a,e){var f=c("useReStore")(),g=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWCMPausedChatMemberDialog.react").__setRef("useMWCMJoinCMThread")),l=g[0],m=c("useMWNavigation")();g=j(!1);var n=g[0],o=g[1];g=a.hasPendingInvitation||!1;var p=a.threadStatus!=null&&d("I64").equal(a.threadStatus,d("I64").of_int32(c("ThreadStatus").PAUSED)),q=c("qex")._("1351")===!0,r=q&&d("MWCMThreadTypes.react").isUnjoinedCMThread(a.threadType)&&a.needsAdminApprovalForNewParticipant!==!0,s=d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(f.runInTransaction(function(b){return c("LSVerifyThreadView")(a.threadKey,a.threadType,void 0,void 0,void 0,void 0,c("LSVec").ofArray([]),d("LSIntEnum").ofNumber(c("LSMailboxType").MESSENGER),void 0,void 0,c("LSFactory")(b))},"readwrite"))},[f,a.threadKey,a.threadType]);q=c("useGroupsCometCMOffboardingEntryPointDialog")({groupID:d("I64").to_string((q=e==null?void 0:e.fbGroupId)!=null?q:d("I64").zero)});var t=q[0],u=d("I64").equal((q=e==null?void 0:e.enableState)!=null?q:d("LSIntEnum").ofNumber(c("CommunityMessagingEnableState").ENABLED),d("LSIntEnum").ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED)),v=!u&&p&&!d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(154),a)&&!g,w=a.clientThreadKey,x=a.threadKey,y=a.threadType;i(function(){if(!n)return;k(y)&&(m.openTabOrInbox({clientThreadKey:w,threadKey:x,threadType:y},"inboxThreadList"),o(!1))},[y,w,x,n,m]);return function(d,g,i){if(c("gkx")("2592")&&c("MWCMisStandAloneCommunity")(e)){c("promiseDone")(f.runInTransaction(function(d){o(!0);return b("cr:5781")!=null?b("cr:5781")(a.threadKey,c("LSFactory")(d)):(h||(h=b("Promise"))).resolve()},"readwrite","ui"));return}if(v)return l({thread:a},c("emptyFunction"));if(!u&&r&&i){g=g?g.metaKey||g.ctrlKey||g.shiftKey:!1;s();return i(g)}if(!u)return d();if((e==null?void 0:e.fbGroupId)==null)return;return t({},c("emptyFunction"))}}g["default"]=a}),98);
__d("MWJewelThreadAddOnSecondaryIcons",["cr:1737009"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1737009")}),98);
__d("TetraMWJewelThreadAddOnSecondaryIcons",["ix","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("react");b=a.jsx(c("TetraIcon.react"),{color:"disabled",icon:d("fbicon")._(h("569284"),16)});g.bell=b}),98);
__d("MWPThreadListItemInviteAddOn.react",["fbt","MWPBumpEntityKey","MWXCircleButton.react","MWXIconCheckmark","MWXIconCross","MWXRow.react","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=h._("__JHASH__ThY36iiMiSm__JHASH__"),k=h._("__JHASH__IQ1-ytNyqLB__JHASH__");a=function(a){var b=a.onAccept,e=a.onDecline;return i.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCheckmark"),label:j,onPress:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.accept"),b()},size:32})}),i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:k,onPress:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.decline"),e()},size:32})})]})};b=a;g["default"]=b}),98);
__d("MDSPushPinSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:h.jsx("path",{clipRule:"evenodd",d:"M21.39 21.997a.5.5 0 0 0-.485.38l-1.663 6.65c-.322 1.292-2.162 1.291-2.484 0l-1.663-6.65a.5.5 0 0 0-.485-.38h-4.442c-.95 0-1.478-1.064-.972-1.816.419-.62 1.533-2.029 3.589-3.04a.982.982 0 0 0 .536-.811c.099-1.284.334-3.339.435-4.661a.988.988 0 0 0-.465-.918 7.136 7.136 0 0 1-2.075-1.914C10.674 8.07 11.212 7 12.163 7h11.675c.95 0 1.488 1.07.946 1.837-.31.44-.97 1.232-2.075 1.914a.99.99 0 0 0-.465.918c.102 1.322.337 3.377.435 4.661a.982.982 0 0 0 .537.812c2.055 1.01 3.17 2.419 3.588 3.04.506.751-.021 1.816-.971 1.816H21.39Z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadAddOnSecondary.react",["fbt","ix","CometBadge.react","CometPressable.react","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","MAWGating","MDSPushPinSvgIcon.react","MWJewelThreadAddOnSecondaryIcons","MWMessageDeliveryStatusIcons","MWPActor.react","QE2Logger","ReQL","ReQLSuspense","TetraOverlappingFacepileUnstyled.react","cr:2876","cr:3641","cr:4938","getLSMediaContactProfilePictureUrl","gkx","qex","react","useMWIsReadReceiptsDisabledForThread","useMWLSMarkThreadAsRead","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");e=d("react").memo;function k(a){var b=c("useReStore")(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("threads"),["threadKey","lastActivityTimestampMs"]).getKeyRange(a)},[b,a],f.id+":74"),h=c("useMWIsReadReceiptsDisabledForThread")(a)&&c("gkx")("8937");return d("ReQLSuspense").useArray(function(){if(h||g==null)return d("ReQL").empty();else return d("ReQL").fromTableAscending(b.table("participants").index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(g.threadKey).bounds({gte:d("ReQL").key(g.lastActivityTimestampMs)}).filter(function(a){a=a.contactId;return!d("I64").equal(a,e)}).take(3).map(function(a){a=a.contactId;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.table("contacts"),["name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(a),f.id+":105");return a!=null?{alt:a.name,source:{uri:c("getLSMediaContactProfilePictureUrl")(a)}}:null})},[b,e,g,h],f.id+":86").filter(Boolean)}function a(a){var e=a.entryPoint,f=a.isMuted,g=a.isPaused,l=a.isPinned,m=a.isUnread,n=a.isViewerSender,o=a.lastMessageDeliveryStatusIcon;a=a.thread;var p=c("useMWLSMarkThreadAsRead")(e);e=k(a.threadKey);var q=[];a=d("LSMessagingThreadTypeUtil").isSecure(a.threadType)&&d("LSMessagingThreadTypeUtil").isGroup(a.threadType);c("gkx")("2445")&&l&&q.push(j.jsx(c("MDSPushPinSvgIcon.react"),{color:"tertiary",size:24}));if(g){l=b("cr:2876")?j.jsx(b("cr:2876"),{color:"disabled",size:16}):b("cr:4938")&&b("cr:3641")?j.jsx(b("cr:4938"),{color:"disabled",icon:b("cr:3641")._(i("497671"),16)}):null;l!=null&&q.push(l)}f&&q.push(c("MWJewelThreadAddOnSecondaryIcons").bell);if(m)q.push(j.jsx(c("CometPressable.react"),{"aria-label":h._("__JHASH__kxStFVEPa-2__JHASH__"),expanding:!0,onPress:function(a){return p()},children:j.jsx(c("CometBadge.react"),{color:"blue",isProfileBadge:!0,size:d("MAWGating").isArmadillo()&&c("CurrentEnvironment").messengerdotcom?10:12})}));else if(n){g=!1;if(e.length!==0&&a){g=(l=c("qex")._("891"))!=null?l:!1;d("QE2Logger").logExposureForUser("messenger_armadillo_web_message_states")}e.length===0?o&&q.push(o):a&&!g?q.push(j.jsx(c("MWMessageDeliveryStatusIcons").DeliveredAndReadIcon,{size:12})):q.push(j.jsx(c("TetraOverlappingFacepileUnstyled.react"),{count:e.length,isTextInline:!0,items:e,screenReaderLabel:e.length===1?h._("__JHASH__2MhSP-AMGlO__JHASH__",[h._param("=personName",e[0].alt)]):h._("__JHASH__jJBaERf_iKB__JHASH__",[h._param("=numPeople",e.length,[0])]),size:16}))}return j.jsx("div",{className:"x6s0dn4 x78zum5 xozqiw3",children:q.map(function(a,b){return j.jsxs(j.Fragment,{children:[b!==0?j.jsx("div",{className:"x1fsd2vl"}):null,a]},"item_"+b.toString(10))})})}a.displayName=a.name+" [from "+f.id+"]";e=e(a);g["default"]=e}),98);
__d("MWThreadListItemStatus.react",["MWMessageDeliveryStatusIcons","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.status;switch(a.type){case"Sending":return h.jsx(c("MWMessageDeliveryStatusIcons").SendingIcon,{size:12});case"Sent":return h.jsx(c("MWMessageDeliveryStatusIcons").SentIcon,{size:12});case"Delivered":return h.jsx(c("MWMessageDeliveryStatusIcons").DeliveredIcon,{size:12});case"Error":return h.jsx(c("MWMessageDeliveryStatusIcons").ErrorIcon,{size:12});default:return null}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWGroupInvitesForThread.bs",["LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("LSMessagingThreadTypeUtil").isSecure(a.threadType),c=d("LSMessagingThreadTypeUtil").isGroup(a.threadType);a=d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(105),a);if(b&&c)return a;else return!1}g.isGroupInviteThread=a}),98);
__d("CheckmarkFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 12 13",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:h.jsx("path",{fillRule:"nonzero",d:"M451.78 1079.098a.75.75 0 0 0-1.06 1.06l3.08 3.082a.75.75 0 0 0 1.061 0l6.42-6.42a.75.75 0 0 0-1.061-1.06l-5.889 5.889-2.55-2.55z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CrossFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 12 13",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:h.jsxs("g",{fillRule:"nonzero",children:[h.jsx("path",{d:"m98.095 917.155 7.75 7.75a.75.75 0 0 0 1.06-1.06l-7.75-7.75a.75.75 0 0 0-1.06 1.06z",transform:"translate(353.5 159)"}),h.jsx("path",{d:"m105.845 916.095-7.75 7.75a.75.75 0 1 0 1.06 1.06l7.75-7.75a.75.75 0 0 0-1.06-1.06z",transform:"translate(353.5 159)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("Dots3HorizontalOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 20 20",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("g",{fillRule:"evenodd",transform:"translate(-446 -398)",children:h.jsx("path",{d:"M458 408a2 2 0 1 1-4 0 2 2 0 0 1 4 0m6 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m-12 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("JSSet.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Array.from(a.values())}f.values=a}),66);
__d("FBGroupChatInviteState",[],(function(a,b,c,d,e,f){a=Object.freeze({ACCEPTED:1,ACTIVE:2,DECLINED_BY_RECEIVER:3,IGNORED_BY_RECEIVER:4,DELETED_BY_SENDER:5,DISCARDED:6});f["default"]=a}),66);
__d("MXRDiv.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,b){var d=a.style;a=babelHelpers.objectWithoutPropertiesLoose(a,["style"]);return h.jsx("div",babelHelpers["extends"]({},a,c("stylex").spread(d),{ref:b}))}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MWFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(a,b,c,d,e,f,g){"use strict";g.createFocusTable=d("FocusTable.react").createFocusTable,g.tabbableScopeQuery=d("focusScopeQueries").tabbableScopeQuery}),98);
__d("MessageRequestsBulkActionsThreadListItem.bs",["ix","CometPressable.react","I64","JSSet.bs","MWPIsThreadUnread.bs","MWXIcon.react","MessageRequestsBulkActionsContext.react","fbicon","react","useMWAriaLabelForThread"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useContext,l=b.useEffect,m={checkboxWrapper:{paddingEnd:"x1sxyh0",$$css:!0},pressableContent:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",display:"x1lliihq",width:"xh8yej3",$$css:!0},selectorWrapper:{alignItems:"x6s0dn4",display:"x78zum5",paddingTop:"xexx8yu",paddingEnd:"x1iji9kk",paddingBottom:"x18d9i69",paddingStart:"x1sln4lm",$$css:!0},threadItemContainerEditMode:{flexGrow:"x1iyjqo2",minWidth:"xeuugli",pointerEvents:"x47corl",$$css:!0}};function a(a){var b=a.thread;a=a.threadListCell;var e=k(c("MessageRequestsBulkActionsContext.react")),f=e.setBulkActionsUnreadSelectedThreads,g=e.setBulkActionsSelectedThreads,n=e.bulkActionsSelectedThreads,o=d("I64").to_string(b.threadKey);e=j(function(){return g(function(a){a=new Set(d("JSSet.bs").values(a));if(a["delete"](o))return a;else return a.add(o)})});l(function(){f(function(a){a=new Set(d("JSSet.bs").values(a));if(d("MWPIsThreadUnread.bs").isThreadUnread(b)&&n.has(o))return a.add(o);else if(d("MWPIsThreadUnread.bs").isThreadUnread(b)){a["delete"](o);return a}else return a})},[n]);var p=n.has(o),q=c("useMWAriaLabelForThread")(b);return i.jsx(c("CometPressable.react"),{"aria-checked":p,"aria-label":q,onPress:e,role:"checkbox",xstyle:function(){return[m.pressableContent]},children:i.jsxs("div",{"aria-hidden":!0,className:"x6s0dn4 x78zum5 xexx8yu x1iji9kk x18d9i69 x1sln4lm",children:[i.jsx("div",{className:"x1sxyh0",children:i.jsx(c("MWXIcon.react"),{color:p?"highlight":"disabled",hideHoverOverlay:!0,icon:p?d("fbicon")._(h("484757"),20):d("fbicon")._(h("659288"),20)})}),i.jsx("div",{className:"x1iyjqo2 xeuugli x47corl",children:a})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePreloadRoute",["JSScheduler","react","useCometRouterDispatcher","useMWNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a,b){var e=c("useMWNavigation")(),f=c("useCometRouterDispatcher")();h(function(){d("JSScheduler").scheduleSpeculativeCallback(function(){f!=null&&f.prefetchRouteDefinition(e.getUrlFromThreadKey(a,b))})},[f,e,a,b])}g["default"]=a}),98);
__d("MWPGetThreadCTA",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["VideoCall","VoiceCall"]);function a(a){a=(a=a==null?void 0:a.lastMessageCtaType)!=null?a:null;var b=a==="xma_rtc_missed_video"||a==="xma_rtc_missed_group_video";a=a==="xma_rtc_missed_audio"||a==="xma_rtc_missed_group_audio";return b?g.VideoCall:a?g.VoiceCall:null}c=a;f.ThreadCTA=g;f.getThreadCTA=c}),66);
__d("MWThreadListConsts",["I64"],(function(a,b,c,d,e,f,g){"use strict";a=56;b=900;g.threadlistItemHeight=a;g.minimumPixelsNeededForMaxDisplay=b;g.DEFAULT_MIN_LAST_ACTIVITY_TIMESTAMP=d("I64").one}),98);
__d("MWThreadListFocusableTable.react",["MWFocusTable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=d("MWFocusTable.react").createFocusTable(d("MWFocusTable.react").tabbableScopeQuery);var i=a[0];b=a[1];c=a[2];e=function(a){return h.jsx(i,{allowModifiers:!0,tabScopeQuery:d("MWFocusTable.react").tabbableScopeQuery,wrapX:!0,children:a.children})};g.MWThreadListFocusableTableRow=b;g.MWThreadListFocusableTableCell=c;g.MWThreadListFocusableTableScopeQuery=d("MWFocusTable.react").tabbableScopeQuery;g.MWThreadListFocusableTable=e}),98);
__d("useMWLogLongSuspense",["MWPBumpEntityKey","clearTimeout","react","setTimeout","useMergeRefs","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useRef;function a(a,b){var d=l(a,5,b),e=l(a,15,b),f=l(a,60,b);a=l(a,300,b);return c("useMergeRefs")(d,e,f,a)}var k=/\W/g;function l(a,b,e){var f=a.replace(k,"_"),g=j();a=h(function(){g.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mwp","long_suspension."+f+".suspended_"+b+"_sec"),e==null?void 0:e(b)},b*1e3)},[e,f,b]);var l=h(function(){c("clearTimeout")(g.current)},[]);i(function(){return l},[l]);return c("useVisibilityObserver")({onHidden:l,onVisible:a})}g["default"]=a}),98);
__d("MWThreadListGlimmer.react",["MWXGlimmer.react","MXRDiv.react","gkx","react","useMWLogLongSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={glimmerBody:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xktia5q",$$css:!0},glimmerHeadline:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x1qx5ct2",marginBottom:"x1e56ztr",width:"x3hqpx7",$$css:!0},glimmerPhoto48:{borderTopStartRadius:"xzolkzo",borderTopEndRadius:"x12go9s9",borderBottomEndRadius:"x1rnf11y",borderBottomStartRadius:"xprq8jg",height:"xsdox4t",marginEnd:"xmo9yow",width:"x1useyqa",$$css:!0},glimmerPhoto56:{borderTopStartRadius:"xzolkzo",borderTopEndRadius:"x12go9s9",borderBottomEndRadius:"x1rnf11y",borderBottomStartRadius:"xprq8jg",height:"xnnlda6",marginEnd:"xmo9yow",width:"x15yg21f",$$css:!0},glimmerRoot:{display:"x78zum5",paddingBottom:"xwib8y2",paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",paddingTop:"x1y1aw1k",$$css:!0},glimmerText:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}},j=c("gkx")("571"),k=h.forwardRef(function(a,b){a=a.role;return h.jsxs(c("MXRDiv.react"),{ref:b,role:a,style:i.glimmerRoot,children:[h.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j?i.glimmerPhoto48:i.glimmerPhoto56}),h.jsxs(c("MXRDiv.react"),{style:i.glimmerText,children:[h.jsx(c("MWXGlimmer.react"),{index:1,xstyle:i.glimmerHeadline}),h.jsx(c("MWXGlimmer.react"),{index:2,xstyle:i.glimmerBody})]})]})});function a(a){var b=a.numberOfItems;b=b===void 0?1:b;var d=a.parentComponentForDebug,e=a.role,f=c("useMWLogLongSuspense")(d+".MWThreadListGlimmer");return h.jsx(h.Fragment,{children:Array(b).fill(!0).map(function(a,b){return h.jsx(k,{ref:b===0?f:void 0,role:e},"mw_list_glimmer_"+b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadListItemAddOnEnd.react",["fbt","FBGroupChatInviteState","I64","Int64Hooks","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSUpdateCommunityChannelDirectInvite","MWCMThreadTypes.react","MWJewelPopoverDialogContext.react","MWPActor.react","MWPIsThreadUnread.bs","MWPMessageRowCalculateStatus.react","MWPThreadListItemInviteAddOn.react","MWThreadAddOnSecondary.react","MWThreadListItemStatus.react","ReQL","ReQLSuspense","ThreadStatus","cometPushToast","gkx","justknobx","promiseDone","qex","react","requireDeferred","useMWChatCalculateIsMutedFromExpireTime","useMWLSThreadIsPinned","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useContext,k=c("requireDeferred")("C4gEngagementFalcoEvent").__setRef("MWThreadListItemAddOnEnd.react");function l(a){var b=a.communityId,c=a.event,e=a.groupId,f=a.parentSurface,g=f===void 0?"channel_list":f,h=a.source,i=a.threadId;k.onReady(function(a){return a.log(function(){return{action:"tap",community_id:b==null?null:d("I64").to_string(b),event:c,group_id:e==null?null:d("I64").to_string(e),parent_surface:g,source:h,surface:"chat_row",thread_id:d("I64").to_string(i)}})})}var m=i.memo(function(a){var b=a.communityId,e=a.fbGroupId,g=a.isMaximized,k=a.isUnread,m=a.messagingEntrypoint,n=a.mutedUntilMs,o=a.parentSurface,p=a.showGroupsJoinChatDialog,q=a.thread,r=c("useReStore")();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(r.table("messages").index("messageDisplayOrder"),["senderId","isUnsent","threadKey","primarySortKey","timestampMs","messageId","isAdminMessage","sendStatusV2"]).getKeyRange(q.threadKey)},[r,q.threadKey],f.id+":129");n=c("useMWChatCalculateIsMutedFromExpireTime")(n);var s=d("LSMessagingThreadTypeUtil").isSecure(q.threadType),t=d("LSMessagingThreadTypeUtil").isGroup(q.threadType),u=d("MWPActor.react").useActor(),v=q.threadStatus!=null&&d("I64").equal(q.threadStatus,d("I64").of_int32(c("ThreadStatus").PAUSED)),w=q.snippetSenderContactId;w=w!=null?d("I64").equal(w,u):!1;u=d("MWCMThreadTypes.react").isBroadcastThread(q.threadType);var x=d("I64").equal(q.parentThreadKey,d("LSIntEnum").ofNumber(0)),y=c("useMWLSThreadIsPinned")(),z=!1;if(s){var A;z=(A=c("qex")._("891"))!=null?A:!1}else z=c("justknobx")._("1250");A=j(c("MWJewelPopoverDialogContext.react"));var B=A.setIsOpenForDialog;A=q.hasPendingInvitation||!1;var C=function(){c("promiseDone")(r.runInTransaction(function(a){return c("LSUpdateCommunityChannelDirectInvite")(q.threadKey,d("LSIntEnum").ofNumber(c("FBGroupChatInviteState").DECLINED_BY_RECEIVER),c("LSFactory")(a))},"readwrite")),l({communityId:b,event:"invite_declined",groupId:e,parentSurface:o,source:"direct_invite_decline_button",threadId:q.threadKey}),d("cometPushToast").cometPushSimpleToast(h._("__JHASH__tNF5MX9GoB5__JHASH__").toString())};if(A)return i.jsx(c("MWPThreadListItemInviteAddOn.react"),{onAccept:function(){l({communityId:b,event:"invite_accepted",groupId:e,parentSurface:o,source:"direct_invite_join_button",threadId:q.threadKey});B(m==="jewel");return p()},onDecline:C});return g||!x?i.jsx(c("MWThreadAddOnSecondary.react"),{entryPoint:m,isMuted:n,isPaused:v,isPinned:y,isUnread:k,isViewerSender:w,lastMessageDeliveryStatusIcon:a!=null&&!(u&&c("gkx")("6159")||z)?i.jsx(c("MWPMessageRowCalculateStatus.react"),{isBroadcastThread:u,isLargeGroup:!1,isSecureGroupThread:s&&t,message:a,nextMessage:void 0,children:function(a){return i.jsx(c("MWThreadListItemStatus.react"),{status:a})}}):null,thread:q}):null});function a(a){var b=a.communityId,c=a.fbGroupId,e=a.renderAddOnEnd,f=a.thread;a=babelHelpers.objectWithoutPropertiesLoose(a,["communityId","fbGroupId","renderAddOnEnd","thread"]);var g=d("Int64Hooks").useMemoInt64(function(){return c},[c]),h=d("Int64Hooks").useMemoInt64(function(){return b},[b]),j=d("Int64Hooks").usePickInt64(f,["takedownState","threadType","threadStatus","threadKey","snippetSenderContactId","parentThreadKey","hasPendingInvitation"]);if(e!=null)return e();e=d("MWPIsThreadUnread.bs").isThreadUnread(f);return i.jsx(m,babelHelpers["extends"]({communityId:h,fbGroupId:g,isUnread:e,thread:j},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadListItemMoreActions.react",["fbt","I64","MWJewelPopoverDialogContext.react","MWPGetThreadCTA","MWPIsThreadUnread.bs","MWThreadListFocusableTable.react","MWXCircleButton.react","MWXListCellHoverActions.react","MWXListCellHoverButton.react","MWXPopoverLoadingState.react","MessageRequestsBulkActionsContext.react","MessengerCamcorder.svg.react","MessengerPhone.svg.react","MessengerWebUXLogger","SVGIcon","WebUXLoggingSurfaceContextProvider","cr:2580","gkx","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useContext,l=e.useMemo,m=c("requireDeferred")("MWThreadListHoverButtonDropdownMenu.react").__setRef("MWThreadListItemMoreActions.react"),n=c("gkx")("1977");function a(a){var e=a.menuButtonVisibilityState,f=a.messagingEntrypoint,g=a.mutedUntilMs,o=a.onClose,p=a.selected,q=a.thread;a=l(function(){return d("I64").to_string(q.threadKey)},[q]);var r=d("MWPIsThreadUnread.bs").isThreadUnread(q),s=e[0];e=e[1];var t=e.setMenuBtnFocused,u=e.setMenuBtnHovered,v=e.setMenuOpened;e=k(c("MWJewelPopoverDialogContext.react"));var w=e.setIsOpenForDialog,x=j(function(){if(f==="jewel")return w(!1)},[f,w]),y=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger();e=k(c("MessageRequestsBulkActionsContext.react"));e=e.isBulkActionsEditMode;var z=d("MWPGetThreadCTA").getThreadCTA(q);return i.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:i.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_list_options",children:i.jsx("div",{role:"gridcell",children:e?null:i.jsxs(c("MWXListCellHoverActions.react"),{hidden:!s,children:[n&&z!=null?i.jsx(c("MWXCircleButton.react"),{color:"secondary",icon:d("SVGIcon").svgIcon(z===d("MWPGetThreadCTA").ThreadCTA.VideoCall?c("MessengerCamcorder.svg.react"):c("MessengerPhone.svg.react")),label:h._("__JHASH__TF6qbw6BiBY__JHASH__"),size:32,type:"overlay"}):null,i.jsx(c("MWXListCellHoverButton.react"),{onFocusChange:t,onHoverChange:u,onMenuStateChange:function(a){x();if(a){var c=q.threadKey,d=q.threadType;b("cr:2580")&&b("cr:2580")({threadKey:c,threadType:d},"open_thread_settings_menu",f);y==null?void 0:y({eventName:"open_thread_overflow_menu",threadKey:q.threadKey,threadType:q.threadType})}return v(a)},popoverFallback:i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!0}),popoverProps:{fbid:a,isUnread:r,messagingEntrypoint:f,mutedUntil:g/1e3,onCloseJewel:o,selected:p,thread:q},popoverResource:m,popoverTriggerType:"lazy",size:c("gkx")("571")?32:void 0,testid:void 0})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useGroupsCometJoinChatDialog",["GroupsCometJoinChatDialog.entrypoint","I64","Int64Hooks","MWXCardedDialogLoadingState.react","react","useMWCMShouldGoToFullScreenChatHook","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function j(){return h.jsx(c("MWXCardedDialogLoadingState.react"),{})}j.displayName=j.name+" [from "+f.id+"]";function a(a,b,e,f,g){var h=d("Int64Hooks").useMemoInt64(function(){var c;return{groupID:d("I64").to_string((c=b)!=null?c:d("I64").zero),threadID:d("I64").to_string(a.threadKey)}},[b,a.threadKey]);h=c("useMWXEntryPointDialog")(c("GroupsCometJoinChatDialog.entrypoint"),h,void 0,j);var k=h[0],l=c("useMWCMShouldGoToFullScreenChatHook")(),m=a.hasPendingInvitation||!1;return i(function(){var a={invited:m,onSuccess:g,parentSurface:e,shouldGoToMessenger:l,surface:f};k(a)},[m,g,e,l,k,f])}g["default"]=a}),98);
__d("useOnPressMWThreadListItem",["CommunityMessagingEnableState","I64","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWGroupInvitesForThread.bs","MWCMThreadTypes.react","MWPIsThreadUnread.bs","MessengerThreadTakedownState","MessengerWebUXLogger","ThreadStatus","emptyFunction","react","useBlockedUserInterstitial","useCommunityFolder","useGroupsCometCMDisabledChatEntryPointDialog","useMWCMJoinCMThread","useMWCMPausedChannelMemberDialog.react","useMWNavigation","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a){var b=a.folderEnableState,e=a.lsEntryPoint,f=a.onClose,g=a.thread,i=d("MAWGroupInvitesForThread.bs").isGroupInviteThread(g),j=c("useMWNavigation")();a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MAWGroupInviteDialog.react").__setRef("useOnPressMWThreadListItem"));var k=a[0],l=c("useBlockedUserInterstitial")();a=c("useCommunityFolder")(g);var m=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),n=g.takedownState!=null&&d("I64").equal(g.takedownState,d("LSIntEnum").ofNumber(c("MessengerThreadTakedownState").GEO_BLOCKED)),o=c("useGroupsCometCMDisabledChatEntryPointDialog")({isGeoBlocked:n,threadID:d("I64").to_string(g.threadKey)}),p=o[0];o=c("useMWCMPausedChannelMemberDialog.react")({threadImageUrl:g.threadPictureUrl,threadImageUrlExpirationTimestampMs:g==null?void 0:g.threadPictureUrlExpirationTimestampMs,threadImageUrlFallback:g==null?void 0:g.threadPictureUrlFallback,threadTitle:g.threadName});var q=o[0],r=c("useMWCMJoinCMThread")(g,a);return h(function(a,h){var o,s=d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(g.threadType),t=d("MWCMThreadTypes.react").isUnjoinedCMThread(g.threadType),u=d("LSMessagingThreadTypeUtil").isCMSubthread(g.threadType),v=g.threadStatus!=null&&d("I64").equal(g.threadStatus,d("I64").of_int32(c("ThreadStatus").PAUSED)),w=g.takedownState!=null&&d("I64").equal(g.takedownState,d("LSIntEnum").ofNumber(c("MessengerThreadTakedownState").TAKEN_DOWN));o=d("I64").equal((o=b)!=null?o:d("LSIntEnum").ofNumber(c("CommunityMessagingEnableState").ENABLED),d("LSIntEnum").ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED));var x=g.folderName==="inbox"?d("LSIntEnum").ofNumber(12):g.folderName==="pending"?d("LSIntEnum").ofNumber(29):d("LSIntEnum").ofNumber(30),y=d("MWPIsThreadUnread.bs").isThreadUnread(g),z=function(a){l(g.threadKey,g,function(){var b={clientThreadKey:g.clientThreadKey,isUnread:y,threadKey:g.threadKey,threadType:g.threadType};if(a)return j.openInbox(b,e);j.openTabOrInbox(b,e)},x),f()},A=g.hasPendingInvitation||!1;o=!o&&v&&!d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(154),g)&&!A;m==null?void 0:m({eventName:"open_thread",threadKey:g.threadKey,threadType:g.threadType});if(w||n)return p({isGeoBlocked:n,threadID:d("I64").to_string(g.threadKey)});if(t)return r(h,a,z);if(s&&o)return q();i?k({thread:g},c("emptyFunction")):u||z(a.metaKey||a.ctrlKey||a.shiftKey)},[b,i,r,m,e,l,j,f,p,k,q,g])}g["default"]=a}),98);
__d("MWThreadListItem.react",["CometTextWithEntities.react","CurrentEnvironment","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSRtcCallState","LSThreadTitle.react","MWCMIsAnyCMThread","MWCMIsThreadBumped","MWCMJewelContext","MWCMThreadTypes.react","MWChatTextTransform","MWIsThreadDisabled","MWPIsThreadUnread.bs","MWThreadListConsts","MWThreadListFocusableTable.react","MWThreadListItemAddOnEnd.react","MWThreadListItemMoreActions.react","MWThreadListLastMessage.react","MWThreadPicture.react","MWThreadSnippetForDisplay.react","MWVerticalRhythm","MWXGlimmer.react","MWXListCellPressable.react","MWXText.react","MXRDiv.react","MessageRequestsBulkActionsContext.react","MessageRequestsBulkActionsThreadListItem.bs","MessengerMuteUtils","MessengerWebEntryPointsUtil","MessengerWebUXLogger","MetaConfig","QE2Logger","XPlatReactEnvironment","emptyFunction","gkx","interaction-tracing-metrics","qex","react","useCommunityFolder","useGroupsCometChatsEngagementImpressionLogger","useGroupsCometJoinChatDialog","useMWNavigation","useMWV2PreloadThread","useMatchViewport","useMenuButtonVisibilityState","useMergeRefs","useOnPressMWThreadListItem","usePreloadRoute","useSimpleImpression"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");e=b.memo;var i=b.useCallback,j=b.useContext,k=b.useMemo,l=c("MetaConfig")._("41")===!0,m={communityGlimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x170jfvy",width:"x3hqpx7",$$css:!0},listItemContainer:{paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",position:"x1n2onr6",$$css:!0},listItemContainerDisabled:{opacity:"xbyyjgo",$$css:!0},listItemContainerForMessengerDotCom:{paddingStart:"x16hj40l",paddingEnd:"xsyo7zv",$$css:!0},listItemContainerHiddenContent:{display:"x1lliihq",height:"xqtp20y",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xnalus7",$$css:!0}};function n(a,b){if(c("gkx")("571"))return 48;return a?b&&!c("gkx")("571")?56:48:56}function o(a){var b=a.thread,e=d("MWPIsThreadUnread.bs").isThreadUnread(b),f=d("MWCMThreadTypes.react").isUnjoinedCMThread(b.threadType);return k(function(){return h.jsx(c("MWThreadListLastMessage.react"),{hasOngoingCall:!d("I64").equal(b.ongoingCallState,d("LSIntEnum").ofNumber(c("LSRtcCallState").NO_ONGOING_CALL)),isUnread:e,lastMessageTimestamp:d("I64").to_float(b.lastActivityTimestampMs),showTimestamp:!f,snippet:h.jsx(c("MWThreadSnippetForDisplay.react"),{thread:b}),thread:{lastMessageCtaType:b.lastMessageCtaType,takedownState:b.takedownState,threadKey:b.threadKey,threadType:b.threadType}})},[f,e,b])}function a(a){var b,e=a.hideMoreActions;e=e===void 0?!1:e;var f=a.lsEntryPoint,g=a.messagingEntrypoint,p=a.onClose;p=p===void 0?c("emptyFunction"):p;var q=a.onThreadJoined;q=q===void 0?c("emptyFunction"):q;var r=a.onPress,s=a.onThreadSelected,t=s===void 0?c("emptyFunction"):s;s=a.parentSurface;var u=s===void 0?"channel_list":s;s=a.renderAddOnEnd;var v=a.renderThreadPhoto,w=a.renderThreadSubtitle,x=a.renderThreadTitle,y=a.responsive,z=a.selected,A=a.thread;a=j(c("MWCMJewelContext"));var B=a.selectedFolderTab;a=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"threadlist_item_impression"});var C=k(function(){if(!c("MWCMIsThreadBumped")(A)||!l)return!1;if(c("CurrentEnvironment").messengerdotcom||!d("XPlatReactEnvironment").isWeb())return u==="channel_list";return f==="jewel"?d("I64").equal(B,d("I64").of_int32(0)):f!=="inboxThreadList"},[A,u,B,f]);v=(v=v)!=null?v:function(a){return h.jsx(c("MWThreadPicture.react"),{badgeSize:c("gkx")("571")?10:14,photoSize:n(c("MWCMIsAnyCMThread")(a.threadType),C),thread:a,withCommunityPicture:C})};x=(x=x)!=null?x:function(a){return h.jsx(c("LSThreadTitle.react"),{thread:a})};w=(w=w)!=null?w:function(a){return h.jsx(o,{thread:A})};var D=function(){if(!c("MWCMIsAnyCMThread")(A.threadType)||c("CurrentEnvironment").messengerdotcom||!d("XPlatReactEnvironment").isWeb())return null;if(c("qex")._("138")===!1&&!C)return null;return(U==null?void 0:U.name)==null?h.jsxs(h.Fragment,{children:[h.jsx(c("MWXGlimmer.react"),{index:1,xstyle:m.communityGlimmer}),h.jsx(c("MWVerticalRhythm"),{height:8})]}):h.jsxs(h.Fragment,{children:[h.jsx(c("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta3",children:U==null?void 0:U.name}),h.jsx(c("MWVerticalRhythm"),{height:8})]})};c("useSimpleImpression")(function(){var a=d("LSMessagingThreadTypeUtil").isSecure(A.threadType),b=d("interaction-tracing-metrics").InteractionTracingMetricsCore.currentInteractionLogger();return b.addMetadata("hasSecureThread",a?1:0)});var E=c("useGroupsCometChatsEngagementImpressionLogger")({event:"bumped_chat_rendered",group_id:d("I64").to_string(A.parentThreadKey),parent_surface:f==="jewel"?"jewel_inbox":"chats_inbox",source:"unknown",surface:"messenger_inbox",thread_id:d("I64").to_string(A.threadKey)}),F=d("LSMessagingThreadTypeUtil").isSecure(A.threadType),G=c("useMWNavigation")();y=c("useMatchViewport")("min","width",d("MWThreadListConsts").minimumPixelsNeededForMaxDisplay)||!y;var H=c("MWIsThreadDisabled")(A.takedownState),I=d("MWPIsThreadUnread.bs").isThreadUnread(A)&&!H,J=d("MWCMThreadTypes.react").isUnjoinedCMThread(A.threadType);b=(b=c("qex")._("1351"))!=null?b:!1;b=b&&A.hasPendingInvitation===!0;var K=k(function(){return d("MessengerMuteUtils").calcMuteUntilMs(A)},[A]),L=c("useMenuButtonVisibilityState")(!0),M=L[1].setListItemHovered,N=c("MWCMIsAnyCMThread")(A.threadType),O=d("I64").equal(A.parentThreadKey,d("LSIntEnum").ofNumber(0));J=H?!1:O?y:!(J||e);e=i(function(){return M(!1)},[M]);var P=i(function(){return M(!0)},[M]);F&&d("QE2Logger").logExposureForUser("messenger_armadillo_web_message_states");F=c("useMWV2PreloadThread")(A.threadKey,F);var Q=F[0],R=F[1];F=F[2];var S=A.additionalThreadContext,T=k(function(){if(S!=null)return h.jsxs(h.Fragment,{children:[h.jsx(c("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta4",children:h.jsx(c("CometTextWithEntities.react"),{text:S,transforms:d("MWChatTextTransform").epdTextTransforms})}),h.jsx(c("MWVerticalRhythm"),{height:8})]});else return null},[S]),U=c("useCommunityFolder")(A),V=k(function(){if(U!=null&&N)return[U.fbGroupId,U.folderId,U.enableState];else return[void 0,void 0,void 0]},[N,U]),W=V[0],X=V[1];V=V[2];var Y=j(c("MessageRequestsBulkActionsContext.react"));Y=Y.isBulkActionsEditMode;c("usePreloadRoute")(A.threadKey,A.threadType);var Z=!H&&!(C||!c("MWCMIsAnyCMThread")(A.threadType)||d("MessengerWebEntryPointsUtil").getEntryPointShouldOverrideThreadSnippetRemoval(f)),aa=c("useOnPressMWThreadListItem")({fbGroupId:W,folderEnableState:V,lsEntryPoint:f,onClose:p,thread:A}),$=c("useGroupsCometJoinChatDialog")(A,W,u,"messenger_inbox",q);V=H||b?void 0:h.jsx(c("MWThreadListItemAddOnEnd.react"),{communityId:X,fbGroupId:W,isMaximized:y,isUnread:I,messagingEntrypoint:g,mutedUntilMs:K,parentSurface:u,renderAddOnEnd:s,showGroupsJoinChatDialog:$,thread:A});q=h.jsx(c("MWXListCellPressable.react"),{addOnEnd:V,addOnStart:v(A),"aria-current":z?"page":!1,content:h.jsxs(c("MXRDiv.react"),{style:y||!O?void 0:m.listItemContainerHiddenContent,children:[T,D(),h.jsx(c("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:I?"headlineEmphasized4":"headline4",children:x(A)}),d("MWCMThreadTypes.react").isJoinedCMThread(A.threadType)&&Z?null:h.jsxs(h.Fragment,{children:[h.jsx(c("MWVerticalRhythm"),{height:8}),w(A)]})]}),linkProps:H?void 0:{preventLocalNavigation:!0,url:G.getUrlFromThreadKey(A.threadKey,A.threadType)},onHoverIn:Q,onHoverOut:R,onPress:function(a){r!=null?r==null?void 0:r(a):aa(a,$),t()},onPressIn:F,selected:z,size:"large"});b=J?h.jsx(c("MWThreadListItemMoreActions.react"),{fbGroupId:W,menuButtonVisibilityState:L,messagingEntrypoint:g,mutedUntilMs:K,onClose:p,selected:z,thread:A}):null;X=c("useMergeRefs")(a,C?E:null);return h.jsx(c("MXRDiv.react"),{"data-testid":void 0,ref:X,children:h.jsx(c("MXRDiv.react"),{"data-testid":void 0,onMouseEnter:P,onMouseLeave:e,role:"row",style:[m.listItemContainer,H?m.listItemContainerDisabled:!1,c("gkx")("571")?m.listItemContainerForMessengerDotCom:!1],children:h.jsxs(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:[h.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:h.jsx(c("MXRDiv.react"),{role:"gridcell",children:Y?h.jsx(c("MessageRequestsBulkActionsThreadListItem.bs"),{thread:A,threadListCell:q}):q})}),b]})})})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("MWPThreadItemsContainer.react",["FocusRegion.react","MWThreadListFocusableTable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children;a=a.gridLabel;return h.jsx("div",{"aria-label":a,"data-testid":void 0,role:"grid",children:h.jsx(d("FocusRegion.react").FocusRegion,{autoRestoreFocus:!0,recoverFocusQuery:d("MWThreadListFocusableTable.react").MWThreadListFocusableTableScopeQuery,children:h.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);