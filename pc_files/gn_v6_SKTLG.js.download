;/*FB_PKG_DELIM*/

__d("MWXSwitch.react",["cr:1925","cr:1926","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var c=a.icon,d=a.size;a=babelHelpers.objectWithoutPropertiesLoose(a,["icon","size"]);if(b("cr:1925"))return h.jsx(b("cr:1925"),babelHelpers["extends"]({},a,{icon:c,size:d}));return b("cr:1926")?h.jsx(b("cr:1926"),babelHelpers["extends"]({},a)):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCreateOptimisticSecureThread",["I64","LSAuthorityLevel","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2","Promise","ReQLTable","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){return c("LSVerifyE2EEMetadataThreadExistsV2")(b,void 0,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").OPTIMISTIC),c("LSFactory")(a)).then(function(b){var e=b[0];return d("ReQLTable").update(a.table("threads"),{hd:e,tl:0},function(a){if(a==null)throw c("unrecoverableViolation")("Optimistic thread is missing","messenger_e2ee_web");return babelHelpers["extends"]({},a,{clientThreadKey:e})}).then(function(){return e})})}function a(a,e,f){return i(a,f).then(function(f){return(h||(h=b("Promise"))).all(e.map(function(b){return a.table("participants").add({authorityLevel:d("LSIntEnum").ofNumber(c("LSAuthorityLevel").OPTIMISTIC),contactId:b.id,deliveredWatermarkTimestampMs:d("I64").zero,groupParticipantJoinState:d("LSIntEnum").ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:void 0,isModerator:!1,isSuperAdmin:void 0,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:d("I64").zero,readWatermarkTimestampMs:d("I64").zero,subscribeSource:void 0,threadKey:f})})).then(function(){return f})})}g.call=a}),98);
__d("FDSInboxNavigationHeaderWithBackButton.react",["CometTopNavListDropdown.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.endContent,d=a.onReturn;a=a.title;return h.jsx(c("CometTopNavListDropdown.react").Title,{actions:b!=null?[b]:[],onReturn:d,title:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxNavigationHeaderWithBackButton.react",["FDSInboxNavigationHeaderWithBackButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";d("react"),g["default"]=c("FDSInboxNavigationHeaderWithBackButton.react")}),98);
__d("useMWInboxSelectedThread",["MWInboxProvider.react","react","useMWInboxURIState"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(){var a=h(d("MWInboxProvider.react").MWInboxProviderContext);if(a==null||a.type!==d("useMWInboxURIState").MWInboxURIStateTag.Recent)return;a=a.uriStateDetails;if(a==null)return;switch(a.type){case d("useMWInboxURIState").MWInboxURIStateDetailsType.Thread:case d("useMWInboxURIState").MWInboxURIStateDetailsType.SecureThread:return a.fbid;default:return}}g["default"]=a}),98);
__d("MWUseGlobalMuteUntil.bs",["I64","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useReStore")(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("notification_settings"))},[a],f.id+":24");return b!=null?b.globalMuteUntil:d("I64").zero}g.useGlobalMuteUntil=a}),98);
__d("MWPThreadPreview.react",["CometHeroInteractionWithDiv.react","I64","Int64Hooks","InteractionTracingMetrics","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSLocalCreateOptimisticGroupThread","LSMessagingThreadTypeUtil","LSVec","LSVerifyContactRowExists","LSVerifyThreadRowExists","MAWGating","MWChatInteraction.bs","MWPActor.react","MWPThreadThemeProvider.react","MWThreadKey.react","Promise","ReQL","ReQLSuspense","cr:4055","promiseDone","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useMemo,l={composer:{flexShrink:"x2lah0s",minHeight:"x879a55",$$css:!0},container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",fontSize:"x6prxxf",minHeight:"x2lwn1j",$$css:!0},preview:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0}};function m(a){var e=c("useReStore")();j(function(){c("promiseDone")(e.runInTransaction(function(e){return(h||(h=b("Promise"))).all(a.map(function(a){return c("LSVerifyContactRowExists")(a.id,d("LSIntEnum").ofNumber(c("LSContactIdType").FBID),void 0,void 0,d("LSIntEnum").ofNumber(c("LSContactType").USER),void 0,void 0,void 0,void 0,!1,!1,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),void 0,!1,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),void 0,void 0,d("LSIntEnum").ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN),d("LSIntEnum").ofNumber(c("LSContactGender").UNKNOWN),d("LSIntEnum").ofNumber(c("LSContactViewerRelationship").UNKNOWN),void 0,c("LSFactory")(e))}))},"readwrite"))},[e,JSON.stringify(a.map(function(a){return d("I64").to_string(a.id)}))])}function n(a){var b=a.children,e=a.renderThreadPreview,f=a.renderThreadView,g=a.thread,h=d("MWChatInteraction.bs").get("open_with_tokens");j(function(){h!=null&&(c("InteractionTracingMetrics").addAnnotation(h,"thread_id",d("I64").to_string(g.threadKey)),c("InteractionTracingMetrics").addAnnotation(h,"thread_type",d("I64").to_string(g.threadType)),c("InteractionTracingMetrics").addAnnotation(h,"isSecure",d("LSMessagingThreadTypeUtil").isSecure(g.threadType).toString()))},[h,g.threadKey,g.threadType]);return e!=null?e(g,b):i.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:g.threadKey,children:i.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6prxxf x2lwn1j",children:[i.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MWV2_CHAT_TAB",interactionUUID:h,pageletName:"ChatTab",xstyle:l.preview,children:i.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:g.themeFbid,children:f(g)})}),i.jsx("div",{className:"x2lah0s x879a55",children:b})]})})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.children,e=a.recipientToken,g=a.renderThreadPreview,h=a.renderThreadView,k=a.setPreviewThread,l=c("useReStore")(),o=e.threadType,p=e.id;m([e]);d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(l.runInTransaction(function(a){return c("LSVerifyThreadRowExists")(p,o,d("LSIntEnum").ofNumber(1),c("LSFactory")(a))},"readwrite"))},[l,p,o]);var q=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(l.table("threads")).getKeyRange(p)},[l,p],f.id+":205");j(function(){k(q)},[k,q]);if(q!=null)return i.jsx(n,{renderThreadPreview:g,renderThreadView:h,thread:q,children:b});else return null}function p(a,b,e){var g=c("useReStore")(),h=d("I64").to_string(d("MWPActor.react").useActor()),i=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.table("participants")).filter(function(a){return b.has(d("I64").to_string(a.contactId))}).map(function(a){return d("I64").to_string(a.threadKey)})},[g,b],f.id+":241");return d("ReQLSuspense").useFirst(function(){var c=new Set(i);return d("ReQL").fromTableAscending(g.table("threads")).filter(function(a){return d("I64").equal(a.threadType,e)}).filter(function(a){return a.threadName==null}).filter(function(a){a=a.clientThreadKey;if(a!=null)return c.has(d("I64").to_string(a));else return!1}).filter(function(c){c=c.clientThreadKey;if(c==null)return!1;c=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(g.table("participants").index("threadKeyReadWatermarkTimestampMs")).getKeyRange(c).map(function(a){return d("I64").to_string(a.contactId)}).filter(function(a){return a!==h}),f.id+":276");if(d("MAWGating").isChatWithYourselfEnabled()&&a.length===1&&c.length===0)return!0;else if(c.every(function(a){return b.has(a)}))return c.length===b.size;else return!1})},[i,g,e,a.length,h,b],f.id+":254")}function q(a,e,f,g){var i=c("useReStore")();j(function(){a==null&&c("promiseDone")(i.runInTransaction(function(a){if(d("I64").equal(e,d("LSIntEnum").ofNumber(2)))return c("LSLocalCreateOptimisticGroupThread")(c("LSVec").ofArray(f.map(function(a){return a.id})),void 0,g,c("LSFactory")(a)).then(function(){});else if(d("LSMessagingThreadTypeUtil").isSecure(e))return b("cr:4055")==null?(h||(h=b("Promise"))).resolve():b("cr:4055").call(a,f,e);c("recoverableViolation")("Don't know how to create optimistic thread for thread of thread type "+(e!=null?d("I64").to_string(e):""),"messenger_web_product");return(h||(h=b("Promise"))).resolve()},"readwrite"))},[g,i,JSON.stringify(a),JSON.stringify(e),f])}function r(a){var b=a.checkExistingThreads,c=a.children,d=a.renderThreadPreview,e=a.renderThreadView,f=a.setPreviewThread,g=a.threadType,h=a.tokenContactIdsMaybeExcludingActor,k=a.tokens;a=a.tokensMaybeExcludingActor;var l=p(a,h,g);m(a);q(l,g,k,b);j(function(){f(l)});if(l!=null)return i.jsx(n,{renderThreadPreview:d,renderThreadView:e,thread:l,children:c});else return null}function s(a,b,e,g){var h=c("useReStore")(),i=d("I64").to_string(d("MWPActor.react").useActor()),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(h.table("participants")).filter(function(a){return b.has(d("I64").to_string(a.contactId))}).map(function(a){return d("I64").to_string(a.threadKey)})},[h,b],f.id+":428");return d("ReQLSuspense").useFirst(function(){var a=new Set(j);return d("ReQL").fromTableAscending(h.table("threads")).filter(function(a){return d("I64").equal(a.threadType,e)}).filter(function(a){return a.threadName==null}).filter(function(a){if(g)return!0;else return d("I64").equal(a.authorityLevel,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").OPTIMISTIC))}).filter(function(b){return a.has(d("I64").to_string(b.threadKey))}).filter(function(a){a=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(h.table("participants").index("threadKeyReadWatermarkTimestampMs")).getKeyRange(a.threadKey).map(function(a){return d("I64").to_string(a.contactId)}),f.id+":460");var c=a.filter(function(a){return a!==i});if(d("MAWGating").isChatWithYourselfEnabled()&&c.length===0&&a.length===1)return!0;else if(a.length===c.length||c.length!==b.size)return!1;else return c.every(function(a){return b.has(a)})})},[j,h,JSON.stringify(e),g,a,b,i],f.id+":439")}function t(a){var b=a.checkExistingThreads,c=a.children,e=a.renderThreadPreview,f=a.renderThreadView,g=a.setPreviewThread,h=a.threadType,l=a.tokens,m=a.tokensMaybeExcludingActor;a=k(function(){return new Set(m.map(function(a){return d("I64").to_string(a.id)}))},[m]);var o=s(m,a,h,b);j(function(){o!=null&&g(o)},[g,o]);if(o!=null)return i.jsx(n,{renderThreadPreview:e,renderThreadView:f,thread:o,children:c});else return i.jsx(r,{checkExistingThreads:b,renderThreadPreview:e,renderThreadView:f,setPreviewThread:g,threadType:h,tokenContactIdsMaybeExcludingActor:a,tokens:l,tokensMaybeExcludingActor:m,children:c})}function a(a){var b=a.areWeCreatingASecureThread,c=a.checkExistingThreads;c=c===void 0?!0:c;var e=a.children,f=a.nullstate;f=f===void 0?null:f;var g=a.renderThreadPreview,h=a.renderThreadView,l=a.setPreviewThread,m=a.tokens,n=d("MWPActor.react").useActor();a=k(function(){return m.filter(function(a){return!d("I64").equal(a.id,n)})},[m,n]);j(function(){m.length===0&&l()},[l,m]);if(m.length===0)return f;var p=a.length;if(p!==1){if(p===0)return b?d("MAWGating").isChatWithYourselfEnabled()?i.jsx(t,{checkExistingThreads:c,renderThreadPreview:g,renderThreadView:h,setPreviewThread:l,threadType:d("LSIntEnum").ofNumber(15),tokens:m,tokensMaybeExcludingActor:m,children:e}):f:i.jsx(o,{recipientToken:m[0],renderThreadPreview:g,renderThreadView:h,setPreviewThread:l,children:e})}else{p=a[0];if(c)if(b)return i.jsx(t,{checkExistingThreads:c,renderThreadPreview:g,renderThreadView:h,setPreviewThread:l,threadType:d("LSIntEnum").ofNumber(15),tokens:m,tokensMaybeExcludingActor:a,children:e});else return i.jsx(o,{recipientToken:p,renderThreadPreview:g,renderThreadView:h,setPreviewThread:l,children:e})}return i.jsx(t,{checkExistingThreads:c,renderThreadPreview:g,renderThreadView:h,setPreviewThread:l,threadType:b?d("LSIntEnum").ofNumber(16):d("LSIntEnum").ofNumber(2),tokens:m,tokensMaybeExcludingActor:a,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMessagingJewelCommunitiesQPBannerContainerPassthroughQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6488000047956149"}),null);